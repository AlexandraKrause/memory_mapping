<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Interaktive Memoryskarte</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Courier New', monospace;
      overflow: hidden;
      height: 100vh;
    }

    .map-container {
      position: relative;
      width: 100vw;
      height: 100vh;
      background: url("map.png") no-repeat center center;
      background-size: cover;
    }

    .map-svg {
      width: 100%;
      height: 100%;
    }

    .memory-dot {
      cursor: pointer;
      filter: drop-shadow(0 0 3px rgba(219, 112, 147, 0.6));
    }

    .memory-dot:hover {
      filter: drop-shadow(0 0 8px rgba(219, 112, 147, 0.9)) brightness(1.3);
    }

    .popup-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      display: none;
      z-index: 1000;
      align-items: center;
      justify-content: center;
    }

    .popup-overlay.visible {
      display: flex;
    }

    .popup-content {
      background: linear-gradient(135deg, #f5f5dc 0%, #f0e6d2 100%);
      border: 2px solid #8b4513;
      border-radius: 12px;
      padding: 25px;
      max-width: 90vw;
      max-height: 85vh;
      width: 500px;
      overflow-y: auto;
      position: relative;
      box-shadow: 0 0 20px rgba(139, 69, 19, 0.3);
      margin: 20px;
    }

    @media (max-width: 768px) {
      .popup-content {
        width: 95vw;
        max-width: none;
        margin: 10px;
        padding: 20px;
        max-height: 90vh;
      }
      
      .popup-title {
        font-size: 18px;
      }
      
      .popup-metadata,
      .memory-content {
        font-size: 12px;
      }
      
      .popup-close {
        font-size: 20px;
        top: 8px;
        right: 12px;
      }
    }

    .popup-close {
      position: absolute;
      top: 10px;
      right: 15px;
      background: none;
      border: none;
      font-size: 24px;
      cursor: pointer;
      color: #8b4513;
      padding: 5px;
    }

    .popup-close:hover {
      color: #654321;
    }

    .popup-title {
      color: #8b4513;
      font-size: 20px;
      margin-bottom: 15px;
      border-bottom: 2px solid #daa520;
      padding-bottom: 8px;
    }

    .popup-metadata {
      background: rgba(139, 69, 19, 0.1);
      padding: 15px;
      border-radius: 6px;
      margin: 15px 0;
      border-left: 4px solid #8b4513;
      font-size: 14px;
      color: #654321;
    }

    .popup-description {
      margin: 15px 0;
      font-style: italic;
      color: #8b7355;
      font-size: 15px;
    }

    .memories-section {
      margin-top: 20px;
    }

    .memories-title {
      color: #8b4513;
      font-size: 16px;
      margin-bottom: 12px;
    }

    .memory-item {
      background: rgba(139, 69, 19, 0.05);
      padding: 15px;
      border-radius: 6px;
      margin: 12px 0;
      border-left: 4px solid #daa520;
    }

    .memory-content {
      font-family: 'Courier New', monospace;
      font-size: 13px;
      line-height: 1.5;
      white-space: pre-wrap;
      color: #654321;
    }

    .memory-caption {
      font-size: 12px;
      color: #8b7355;
      margin-top: 8px;
      font-style: italic;
    }

    .loading {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
      color: #8b4513;
      font-family: 'Courier New', monospace;
      z-index: 1000;
    }
  </style>
</head>
<body>
  <div class="map-container">
    <div class="loading" id="loading">
      <div>// Loading your memory map<span class="cursor">|</span></div>
    </div>
    
    <svg class="map-svg" id="map-svg" viewBox="0 0 800 600">
      <circle class="memory-dot" cx="500" cy="550" r="12" fill="#FF6B47" stroke="#8B4513" stroke-width="2" onclick="showMemory(0)" />
      <text x="500" y="575" text-anchor="middle" font-size="9" fill="#FFFFFF" pointer-events="none">üó∫Ô∏è Memory 1</text>
      
      <circle class="memory-dot" cx="350" cy="500" r="12" fill="#FF8C69" stroke="#8B4513" stroke-width="2" onclick="showMemory(1)" />
      <text x="350" y="525" text-anchor="middle" font-size="9" fill="#FFFFFF" pointer-events="none">üó∫Ô∏è Memory 2</text>
      
      <circle class="memory-dot" cx="450" cy="455" r="12" fill="#FFA07A" stroke="#8B4513" stroke-width="2" onclick="showMemory(2)" />
      <text x="450" y="480" text-anchor="middle" font-size="9" fill="#FFFFFF" pointer-events="none">üèûÔ∏è Memory 3</text>
      
      <circle class="memory-dot" cx="320" cy="410" r="12" fill="#CD853F" stroke="#8B4513" stroke-width="2" onclick="showMemory(3)" />
      <text x="320" y="435" text-anchor="middle" font-size="9" fill="#FFFFFF" pointer-events="none">üèïÔ∏è Memory 4</text>
      
      <circle class="memory-dot" cx="460" cy="360" r="12" fill="#D2691E" stroke="#8B4513" stroke-width="2" onclick="showMemory(4)" />
      <text x="460" y="385" text-anchor="middle" font-size="9" fill="#FFFFFF" pointer-events="none">üå≤ Memory 5</text>
      
      <circle class="memory-dot" cx="600" cy="310" r="12" fill="#DAA520" stroke="#B8860B" stroke-width="2" onclick="showMemory(5)" />
      <text x="600" y="335" text-anchor="middle" font-size="9" fill="#FFFFFF" pointer-events="none">‚õ∞Ô∏è Memory 6</text>

      <circle class="memory-dot" cx="120" cy="300" r="12" fill="#FF7F50" stroke="#8B4513" stroke-width="2" onclick="showMemory(6)" />
      <text x="120" y="325" text-anchor="middle" font-size="9" fill="#FFFFFF" pointer-events="none">üåä Memory 7</text>
      
      <circle class="memory-dot" cx="380" cy="250" r="12" fill="#FF6347" stroke="#8B4513" stroke-width="2" onclick="showMemory(7)" />
      <text x="380" y="275" text-anchor="middle" font-size="9" fill="#FFFFFF" pointer-events="none">üèñÔ∏è Memory 8</text>
      
      <circle class="memory-dot" cx="190" cy="195" r="12" fill="#F4A460" stroke="#8B4513" stroke-width="2" onclick="showMemory(8)" />
      <text x="190" y="220" text-anchor="middle" font-size="9" fill="#FFFFFF" pointer-events="none">üè∞ Memory 9</text>
      
      <circle class="memory-dot" cx="320" cy="185" r="12" fill="#DEB887" stroke="#8B4513" stroke-width="2" onclick="showMemory(9)" />
      <text x="320" y="210" text-anchor="middle" font-size="9" fill="#FFFFFF" pointer-events="none">‚úàÔ∏è Memory 10</text>
      
      <circle class="memory-dot" cx="110" cy="175" r="12" fill="#D2B48C" stroke="#8B4513" stroke-width="2" onclick="showMemory(10)" />
      <text x="110" y="200" text-anchor="middle" font-size="9" fill="#FFFFFF" pointer-events="none">üõõ Memory 11</text>
      
      <circle class="memory-dot" cx="480" cy="165" r="12" fill="#BC8F8F" stroke="#8B4513" stroke-width="2" onclick="showMemory(11)" />
      <text x="480" y="190" text-anchor="middle" font-size="9" fill="#FFFFFF" pointer-events="none">üé™ Memory 12</text>

      <circle class="memory-dot" cx="600" cy="135" r="12" fill="#CD5C5C" stroke="#8B4513" stroke-width="2" onclick="showMemory(12)" />
      <text x="600" y="160" text-anchor="middle" font-size="9" fill="#FFFFFF" pointer-events="none">üé≠ Memory 13</text>

      <circle class="memory-dot" cx="720" cy="120" r="12" fill="#DC143C" stroke="#8B4513" stroke-width="2" onclick="showMemory(13)" />
      <text x="720" y="145" text-anchor="middle" font-size="9" fill="#FFFFFF" pointer-events="none">üé® Memory 14</text>

      <circle class="memory-dot" cx="900" cy="100" r="12" fill="#FF1493" stroke="#8B4513" stroke-width="2" onclick="showMemory(14)" />
      <text x="900" y="125" text-anchor="middle" font-size="9" fill="#FFFFFF" pointer-events="none">üéØ Memory 15</text>

      <circle class="memory-dot" cx="60" cy="70" r="12" fill="#FF69B4" stroke="#8B4513" stroke-width="2" onclick="showMemory(15)" />
      <text x="60" y="95" text-anchor="middle" font-size="9" fill="#FFFFFF" pointer-events="none">üéÆ Memory 16</text>

      <circle class="memory-dot" cx="200" cy="80" r="12" fill="#FFB6C1" stroke="#8B4513" stroke-width="2" onclick="showMemory(16)" />
      <text x="200" y="105" text-anchor="middle" font-size="9" fill="#FFFFFF" pointer-events="none">ü•á Memory 17</text>

      <circle class="memory-dot" cx="810" cy="60" r="12" fill="#FFC0CB" stroke="#8B4513" stroke-width="2" onclick="showMemory(17)" />
      <text x="810" y="85" text-anchor="middle" font-size="9" fill="#FFFFFF" pointer-events="none">üéµ Memory 18</text>

      <circle class="memory-dot" cx="600" cy="50" r="12" fill="#FFEFD5" stroke="#8B4513" stroke-width="2" onclick="showMemory(18)" />
      <text x="600" y="75" text-anchor="middle" font-size="9" fill="#FFFFFF" pointer-events="none">üóª Memory 19</text>

      <circle class="memory-dot" cx="80" cy="40" r="12" fill="#FFFFE0" stroke="#8B4513" stroke-width="2" onclick="showMemory(19)" />
      <text x="80" y="65" text-anchor="middle" font-size="9" fill="#FFFFFF" pointer-events="none">üè† Memory 20</text>

      <circle class="memory-dot" cx="300" cy="30" r="12" fill="#F0E68C" stroke="#8B4513" stroke-width="2" onclick="showMemory(20)" />
      <text x="300" y="55" text-anchor="middle" font-size="9" fill="#FFFFFF" pointer-events="none">üèÜ Memory 21</text>
    </svg>
    
    <div class="popup-overlay" id="popup">
      <div class="popup-content">
        <button class="popup-close" onclick="closePopup()">&times;</button>
        <div id="popup-body"></div>
      </div>
    </div>
  </div>

  <script src="memory-data.js"></script>
  
  <script>
    if (typeof memoryData === 'undefined') {
      console.error('Memorysdaten nicht gefunden!');
      document.getElementById('loading').innerHTML = 
        '<div style="color: #8b4513;">Fehler: Memorysdaten konnten nicht geladen werden.</div>';
    }

    function showMemory(index) {
      if (typeof memoryData === 'undefined') return;
      
      const location = memoryData[index];
      if (!location) return;

      const popup = document.getElementById('popup');
      const popupBody = document.getElementById('popup-body');
      
      popupBody.innerHTML = '';
      
      const title = document.createElement('h2');
      title.className = 'popup-title';
      title.textContent = location.title;
      popupBody.appendChild(title);
      
      const metadata = document.createElement('div');
      metadata.className = 'popup-metadata';
      metadata.innerHTML = `
        <strong>Date:</strong> ${location.date}<br>
        <strong>Location Type:</strong> ${location.type}<br>
      `;
      popupBody.appendChild(metadata);
      
      if (location.description) {
        const desc = document.createElement('div');
        desc.className = 'popup-description';
        desc.textContent = location.description;
        popupBody.appendChild(desc);
      }
      
      if (location.memories && location.memories.length > 0) {
        const memoriesSection = document.createElement('div');
        memoriesSection.className = 'memories-section';
        
        const memoriesTitle = document.createElement('h3');
        memoriesTitle.className = 'memories-title';
        memoriesTitle.textContent = 'Memoryen von diesem Ort';
        memoriesSection.appendChild(memoriesTitle);
        
        location.memories.forEach(memory => {
          const memoryDiv = document.createElement('div');
          memoryDiv.className = 'memory-item';
          
          const content = document.createElement('div');
          content.className = 'memory-content';
          content.textContent = memory.content;
          memoryDiv.appendChild(content);
          
          if (memory.caption) {
            const caption = document.createElement('div');
            caption.className = 'memory-caption';
            caption.textContent = `// ${memory.caption}`;
            memoryDiv.appendChild(caption);
          }
          
          memoriesSection.appendChild(memoryDiv);
        });
        
        popupBody.appendChild(memoriesSection);
      }
      
      popup.className = 'popup-overlay visible';
    }
    
    function closePopup() {
      document.getElementById('popup').className = 'popup-overlay';
    }

    document.addEventListener('click', (e) => {
      if (e.target === document.getElementById('popup')) {
        closePopup();
      }
    });

    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        closePopup();
      }
    });

    window.addEventListener('load', () => {
      setTimeout(() => {
        document.getElementById('loading').style.display = 'none';
      }, 1000);
    });
  </script>
</body>
</html>